{% load static %}
<!DOCTYPE html>
<html lang="en">
Â  <head>
Â  Â  <meta charset="UTF-8" />
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  Â  <title>RVR & JC Grade Calculator</title>
Â  Â  <link rel="stylesheet" href="{% static 'calculator/style.css' %}" />
Â  Â  <link
Â  Â  Â  rel="shortcut icon"
Â  Â  Â  href="https://in.images.search.yahoo.com/images/view;_ylt=AwrKGKPL1zdpSf8_Wmq9HAx.;_ylu=c2VjA3NyBHNsawNpbWcEb2lkAzJlZjM0YjVlNTNhMTY3MWMyNTE4ZDQ0NjI1MTkxMjRiBGdwb3MDMgRpdANiaW5n?back=https%3A%2F%2Fin.images.search.yahoo.com%2Fsearch%2Fimages%3Fp%3Drvr%2Bjc%2Bloogo%26type%3DE210IN714G0%26fr%3Dmcafee%26fr2%3Dpiv-web%26tab%3Dorganic%26ri%3D2&w=223&h=249&imgurl=rvrjcce.ac.in%2Fexamcell%2Fresults%2Fimages%2FRVRJC-Estd-2.jpg&rurl=http%3A%2F%2Frvrjcce.ac.in%2Fexamcell%2Fresults%2Findex.php&size=27KB&p=rvr+jc+loogo&oid=2ef34b5e53a1671c2518d4462519124b&fr2=piv-web&fr=mcafee&tt=RVR%26JC+CE-EXAMS+SECTION&b=0&ni=21&no=2&ts=&tab=organic&sigr=C5EPAFKisGyC&sigb=AUqeW7DWVCl0&sigi=.tWB5xApDNeJ&.crumb=tsz7xQAA3fE&fr=mcafee&fr2=piv-web&type=E210IN714G0"
Â  Â  Â  type="image/x-icon"
Â  Â  />
Â  Â  <style>
Â  Â  Â  body {
Â  Â  Â  Â  background: #f0f4f8;
Â  Â  Â  Â  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  padding: 20px 10px;
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  }

Â  Â  Â  .container {
Â  Â  Â  Â  background: linear-gradient(145deg, #ffffff, #e0f7fa);
Â  Â  Â  Â  border: 2px solid #00acc1;
Â  Â  Â  Â  border-radius: 16px;
Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  max-width: 600px;
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  box-shadow: 0 8px 24px rgba(0, 172, 193, 0.2);
Â  Â  Â  Â  margin: 20px 0;
Â  Â  Â  }

Â  Â  Â  h2 {
Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  color: #00796b;
Â  Â  Â  Â  margin-bottom: 25px;
Â  Â  Â  }

Â  Â  Â  .choice-buttons {
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  margin-bottom: 25px;
Â  Â  Â  }

Â  Â  Â  .choice-btn {
Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  padding: 14px;
Â  Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  Â  background-color: #00bcd4;
Â  Â  Â  Â  color: white;
Â  Â  Â  Â  border: none;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  }

Â  Â  Â  .choice-btn:hover {
Â  Â  Â  Â  background-color: #4dd0e1;
Â  Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  }

Â  Â  Â  .choice-btn.active {
Â  Â  Â  Â  background-color: #00796b;
Â  Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 121, 107, 0.3);
Â  Â  Â  }

Â  Â  Â  .form-row {
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  }

Â  Â  Â  .form-row label {
Â  Â  Â  Â  flex: 0 0 200px;
Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  Â  color: #333;
Â  Â  Â  }

Â  Â  Â  .form-row input,
Â  Â  Â  .form-row select {
Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  padding: 10px 12px;
Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  border: 1px solid #bbb;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  background-color: #fff;
Â  Â  Â  Â  transition: border 0.3s;
Â  Â  Â  }

Â  Â  Â  .form-row input:focus,
Â  Â  Â  .form-row select:focus {
Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  border-color: #00acc1;
Â  Â  Â  Â  box-shadow: 0 0 0 2px rgba(0, 172, 193, 0.2);
Â  Â  Â  }

Â  Â  Â  button[type="submit"] {
Â  Â  Â  Â  margin-top: 25px;
Â  Â  Â  Â  padding: 14px;
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  Â  background-color: #00796b;
Â  Â  Â  Â  color: white;
Â  Â  Â  Â  border: none;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  transition: background-color 0.3s ease;
Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  }

Â  Â  Â  button[type="submit"]:hover {
Â  Â  Â  Â  background-color: #009688;
Â  Â  Â  }

Â  Â  Â  .subject-row {
Â  Â  Â  Â  margin-bottom: 18px;
Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  background-color: #f8fdff;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  border: 1px solid #e0f2f1;
Â  Â  Â  }

Â  Â  Â  .subject-name {
Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  color: #00796b;
Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  font-size: 1.05rem;
Â  Â  Â  }

Â  Â  Â  .credit-info {
Â  Â  Â  Â  color: #666;
Â  Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  }

Â  Â  Â  .subject-select {
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  border: 1px solid #bbb;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  background-color: white;
Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  }

Â  Â  Â  .hidden {
Â  Â  Â  Â  display: none;
Â  Â  Â  }

Â  Â  Â  .footer {
Â  Â  Â  Â  margin-top: 30px;
Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  background-color: #e1f5fe;
Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  Â  border: 1px solid #81d4fa;
Â  Â  Â  }

Â  Â  Â  .footer p {
Â  Â  Â  Â  margin: 5px 0;
Â  Â  Â  }

Â  Â  Â  .footer a {
Â  Â  Â  Â  margin: 0 10px;
Â  Â  Â  Â  color: #00796b;
Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  }

Â  Â  Â  .footer a:hover {
Â  Â  Â  Â  text-decoration: underline;
Â  Â  Â  }

Â  Â  Â  .cgpa-form-row {
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  }

Â  Â  Â  .cgpa-form-row label {
Â  Â  Â  Â  flex: 0 0 200px;
Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  }

Â  Â  Â  .cgpa-form-row input {
Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  padding: 10px 12px;
Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  }

Â  Â  Â  .info-message {
Â  Â  Â  Â  background-color: #e3f2fd;
Â  Â  Â  Â  border: 1px solid #2196f3;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  padding: 12px;
Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  color: #1565c0;
Â  Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  }

Â  Â  Â  .semester-container {
Â  Â  Â  Â  background-color: #f8fdff;
Â  Â  Â  Â  border: 1px solid #b2ebf2;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  }

Â  Â  Â  .semester-title {
Â  Â  Â  Â  color: #00796b;
Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  }

Â  Â  Â  .result-display {
Â  Â  Â  Â  background-color: #e8f5e9;
Â  Â  Â  Â  border: 2px solid #4caf50;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  margin: 20px 0;
Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  color: #2e7d32;
Â  Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  }

Â  Â  Â  /* --- LOADING BUFFER STYLES --- */
Â  Â  Â  #loading-overlay {
Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  background-color: rgba(255, 255, 255, 0.9);
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  z-index: 9999; /* Ensure it is on top */
Â  Â  Â  Â  transition: opacity 0.3s ease-in-out; /* Optional: smooth fade-in */
Â  Â  Â  }

Â  Â  Â  .spinner-container {
Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  background: #fff;
Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
Â  Â  Â  }

Â  Â  Â  .spinner {
Â  Â  Â  Â  border: 8px solid #f3f3f3;
Â  Â  Â  Â  border-top: 8px solid #00acc1; /* Matches your theme color */
Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  width: 60px;
Â  Â  Â  Â  height: 60px;
Â  Â  Â  Â  animation: spin 1s linear infinite;
Â  Â  Â  Â  margin: 0 auto 15px auto;
Â  Â  Â  }

Â  Â  Â  @keyframes spin {
Â  Â  Â  Â  0% { transform: rotate(0deg); }
Â  Â  Â  Â  100% { transform: rotate(360deg); }
Â  Â  Â  }
Â  Â  </style>
Â  </head>

Â  <body>
    <div id="loading-overlay" style="display: none;">
        <div class="spinner-container">
            <div class="spinner"></div>
            <p style="color: #00796b; font-weight: 600;">Calculating and Saving Result...</p>
        </div>
    </div>
    Â  Â  <div class="container">
Â  Â  Â  <h2>RVR & JC Semester GPA Calculator</h2>

Â  Â  Â  Â  Â  Â  <div class="choice-buttons">
Â  Â  Â  Â  <button class="choice-btn active" onclick="showSGPA(event)">
Â  Â  Â  Â  Â  Calculate SGPA
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <button class="choice-btn" onclick="showCGPA(event)">Calculate CGPA</button>
Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="sgpa-section">
Â  Â  Â  Â  <form id="basic-info-form">
Â  Â  Â  Â  Â  {% csrf_token %}

Â  Â  Â  Â  Â  <div class="info-message">
Â  Â  Â  Â  Â  Â  Enter your basic details to proceed with SGPA calculation
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  Â  Â  <label for="name">Name:</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="name" required />
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  Â  Â  <label for="regno">Register Number:</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="regno" required />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  Â  Â  <label for="branch">Select Branch:</label>
Â  Â  Â  Â  Â  Â  <select id="branch" required>
Â  Â  Â  Â  Â  Â  Â  <option value="">-- Select Branch --</option>
Â  Â  Â  Â  Â  Â  Â  <option value="cse">CSE</option>
Â  Â  Â  Â  Â  Â  Â  <option value="csd">CSD</option>
Â  Â  Â  Â  Â  Â  Â  <option value="csbs">CSBS</option>
Â  Â  Â  Â  Â  Â  Â  <option value="csm">CSM</option>
Â  Â  Â  Â  Â  Â  Â  <option value="it">IT</option>
Â  Â  Â  Â  Â  Â  Â  <option value="ece">ECE</option>
Â  Â  Â  Â  Â  Â  Â  <option value="eee">EEE</option>
Â  Â  Â  Â  Â  Â  Â  <option value="civ">CIV</option>
Â  Â  Â  Â  Â  Â  Â  <option value="che">CHE</option>
Â  Â  Â  Â  Â  Â  Â  <option value="mec">MEC</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <button type="submit">Next â†’ Enter Grades</button>
Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  Â  Â  <form id="grade-form" class="hidden" method="POST">
Â  Â  Â  Â  Â  {% csrf_token %}
Â  Â  Â  Â  Â  <input type="hidden" name="name" id="name-hidden" />
Â  Â  Â  Â  Â  <input type="hidden" name="reg_number" id="regno-hidden" />
Â  Â  Â  Â  Â  <input type="hidden" name="branch" id="branch-hidden" />
Â  Â  Â  Â  Â  <input type="hidden" name="calculation_type" value="sgpa" />

Â  Â  Â  Â  Â  <div class="info-message">
Â  Â  Â  Â  Â  Â  Select grades for each subject. All fields are required.
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div id="subjects-container"></div>
Â  Â  Â  Â  Â  <input type="hidden" id="sgpa-hidden" name="sgpa" />
Â  Â  Â  Â  Â  <button type="submit">Calculate SGPA</button>
Â  Â  Â  Â  </form>
Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="cgpa-section" class="hidden">
Â  Â  Â  Â  Â  Â  Â  Â  <form id="cgpa-form" method="POST">
Â  Â  Â  Â  Â  {% csrf_token %}

Â  Â  Â  Â  Â  <div class="info-message">
Â  Â  Â  Â  Â  Â  Enter your details and semester GPAs to calculate CGPA
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  Â  Â  <label for="cgpa-name">Name:</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="cgpa-name" name="name" required />
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  Â  Â  <label for="cgpa-regno">Register Number:</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="cgpa-regno" name="reg_number" required />
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  Â  Â  <label for="cgpa-branch">Select Branch:</label>
Â  Â  Â  Â  Â  Â  <select id="cgpa-branch" name="branch" required>
Â  Â  Â  Â  Â  Â  Â  <option value="">-- Select Branch --</option>
Â  Â  Â  Â  Â  Â  Â  <option value="cse">CSO / CSE</option>
Â  Â  Â  Â  Â  Â  Â  <option value="csd">CSD</option>
Â  Â  Â  Â  Â  Â  Â  <option value="csbs">CSBS</option>
Â  Â  Â  Â  Â  Â  Â  <option value="csm">CSM</option>
Â  Â  Â  Â  Â  Â  Â  <option value="it">IT</option>
Â  Â  Â  Â  Â  Â  Â  <option value="ece">ECE</option>
Â  Â  Â  Â  Â  Â  Â  <option value="eee">EEE</option>
Â  Â  Â  Â  Â  Â  Â  <option value="civ">CIV</option>
Â  Â  Â  Â  Â  Â  Â  <option value="che">CHE</option>
Â  Â  Â  Â  Â  Â  Â  <option value="mec">MEC</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="semester-container">
Â  Â  Â  Â  Â  Â  <div class="semester-title">Semester 1 GPA</div>
Â  Â  Â  Â  Â  Â  <div class="cgpa-form-row">
Â  Â  Â  Â  Â  Â  Â  <label for="sem1-gpa">Enter GPA:</label>
Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  type="number"
Â  Â  Â  Â  Â  Â  Â  Â  id="sem1-gpa"
Â  Â  Â  Â  Â  Â  Â  Â  name="sem1_gpa"
Â  Â  Â  Â  Â  Â  Â  Â  step="0.01"
Â  Â  Â  Â  Â  Â  Â  Â  min="0"
Â  Â  Â  Â  Â  Â  Â  Â  max="10"
Â  Â  Â  Â  Â  Â  Â  Â  required
Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Enter GPA (0-10)"
Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="semester-container">
Â  Â  Â  Â  Â  Â  <div class="semester-title">Semester 2 GPA</div>
Â  Â  Â  Â  Â  Â  <div class="cgpa-form-row">
Â  Â  Â  Â  Â  Â  Â  <label for="sem2-gpa">Enter GPA:</label>
Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  type="number"
Â  Â  Â  Â  Â  Â  Â  Â  id="sem2-gpa"
Â  Â  Â  Â  Â  Â  Â  Â  name="sem2_gpa"
Â  Â  Â  Â  Â  Â  Â  Â  step="0.01"
Â  Â  Â  Â  Â  Â  Â  Â  min="0"
Â  Â  Â  Â  Â  Â  Â  Â  max="10"
Â  Â  Â  Â  Â  Â  Â  Â  required
Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Enter GPA (0-10)"
Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="semester-container">
Â  Â  Â  Â  Â  Â  <div class="semester-title">Semester 3 GPA</div>
Â  Â  Â  Â  Â  Â  <div class="cgpa-form-row">
Â  Â  Â  Â  Â  Â  Â  <label for="sem3-gpa">Enter GPA:</label>
Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  type="number"
Â  Â  Â  Â  Â  Â  Â  Â  id="sem3-gpa"
Â  Â  Â  Â  Â  Â  Â  Â  name="sem3_gpa"
Â  Â  Â  Â  Â  Â  Â  Â  step="0.01"
Â  Â  Â  Â  Â  Â  Â  Â  min="0"
Â  Â  Â  Â  Â  Â  Â  Â  max="10"
Â  Â  Â  Â  Â  Â  Â  Â  required
Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Enter GPA (0-10)"
Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="cgpa-result" class="result-display hidden">
Â  Â  Â  Â  Â  Â  Calculated CGPA: <span id="cgpa-value">0.00</span>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <input type="hidden" name="calculation_type" value="cgpa" />
Â  Â  Â  Â  Â  <input type="hidden" id="cgpa-hidden" name="cgpa" />
Â  Â  Â  Â  Â  <button type="submit">Save CGPA Result</button>
Â  Â  Â  Â  </form>
Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="footer">
Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Developed with â¤ï¸ by Akhil Siva Chowdary [Y24CO033] | RVR & JC College
Â  Â  Â  Â  </p>
Â  Â  Â  Â  <p>Connect with me:</p>
Â  Â  Â  Â  <a href="https://www.instagram.com/akhil_23.10/" target="_blank"
Â  Â  Â  Â  Â  >Instagram</a
Â  Â  Â  Â  >
Â  Â  Â  Â  |
Â  Â  Â  Â  <a
Â  Â  Â  Â  Â  href="https://www.linkedin.com/in/akhil-siva-chowdary-nandigam-897a99356"
Â  Â  Â  Â  Â  target="_blank"
Â  Â  Â  Â  Â  >LinkedIn</a
Â  Â  Â  Â  >
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  const gradeToPoint = { "A+": 10, A: 9, B: 8, C: 7, D: 6, E: 5, F: 0 };
      const loadingOverlay = document.getElementById('loading-overlay');

Â  Â  Â  // Updated subjects with credits for all branches
Â  Â  Â  const subjects = {
Â  Â  Â  Â  cse: [
Â  Â  Â  Â  Â  ["Probability & Statistics", 3],
Â  Â  Â  Â  Â  ["Universal Human Values", 2],
Â  Â  Â  Â  Â  ["Discrete Mathematical Structures", 3],
Â  Â  Â  Â  Â  ["Computer Organization", 3],
Â  Â  Â  Â  Â  ["Design & Analysis of Algorithms", 3],
Â  Â  Â  Â  Â  ["Object Oriented Programming System", 3],
Â  Â  Â  Â  Â  ["Skill Enhancement Course", 2],
Â  Â  Â  Â  Â  ["DAA Lab", 1.5],
Â  Â  Â  Â  Â  ["OOPS Lab", 1.5],
Â  Â  Â  Â  ],
Â  Â  Â  Â  csd: [
Â  Â  Â  Â  Â  ["Probability & Statistics", 3],
Â  Â  Â  Â  Â  ["Universal Human Values", 2],
Â  Â  Â  Â  Â  ["Discrete Mathematical Structures", 3],
Â  Â  Â  Â  Â  ["Computer Organization", 3],
Â  Â  Â  Â  Â  ["Data Visualization", 3],
Â  Â  Â  Â  Â  ["Object Oriented Programming ", 3],
Â  Â  Â  Â  Â  ["Skill Enhancement Course", 2],
Â  Â  Â  Â  Â  ["Business Communication and Value ScienceLab", 1],
Â  Â  Â  Â  Â  ["OOPS Lab", 1],
Â  Â  Â  Â  Â  ["Data Visualization Lab", 1],
Â  Â  Â  Â  ],
Â  Â  Â  Â  csbs: [
Â  Â  Â  Â  Â  [" Computational Statistics", 3],
Â  Â  Â  Â  Â  ["Universal Human Values", 2],
Â  Â  Â  Â  Â  ["Computer Organization & Architecture", 3],
Â  Â  Â  Â  Â  [" Formal Languages and Automata Theory", 3],
Â  Â  Â  Â  Â  ["Design & Analysis of Algorithms", 3],
Â  Â  Â  Â  Â  ["Object Oriented Programming ", 3],
Â  Â  Â  Â  Â  ["Skill Enhancement Course", 2],
Â  Â  Â  Â  Â  ["Computational Statistics Lab", 1],
Â  Â  Â  Â  Â  ["OOPS Lab", 1],
Â  Â  Â  Â  Â  ["Business Communication and Value Science-III Lab", 1],
Â  Â  Â  Â  ],
Â  Â  Â  Â  csm: [
Â  Â  Â  Â  Â  ["Probability & Statistics", 3],
Â  Â  Â  Â  Â  ["Universal Human Values", 2],
Â  Â  Â  Â  Â  ["Discrete Mathematical Structures", 3],
Â  Â  Â  Â  Â  ["Computer Organization", 3],
Â  Â  Â  Â  Â  ["Design & Analysis of Algorithms", 3],
Â  Â  Â  Â  Â  ["Object Oriented Programming System", 3],
Â  Â  Â  Â  Â  ["Skill Enhancement Course", 2],
Â  Â  Â  Â  Â  ["DAA Lab", 1.5],
Â  Â  Â  Â  Â  ["OOPS Lab", 1.5],
Â  Â  Â  Â  ],
Â  Â  Â  Â  it: [
Â  Â  Â  Â  Â  ["Probability & Statistics", 3],
Â  Â  Â  Â  Â  ["Universal Human Values", 2],
Â  Â  Â  Â  Â  ["Discrete Mathematical Structures", 3],
Â  Â  Â  Â  Â  ["Computer Organization", 3],
Â  Â  Â  Â  Â  ["Design & Analysis of Algorithms", 3],
Â  Â  Â  Â  Â  ["Object Oriented Programming System", 3],
Â  Â  Â  Â  Â  ["Skill Enhancement Course", 2],
Â  Â  Â  Â  Â  ["DAA Lab", 1.5],
Â  Â  Â  Â  Â  ["OOPS Lab", 1.5],
Â  Â  Â  Â  ],
Â  Â  Â  Â  ece: [
Â  Â  Â  Â  Â  ["Probability & Statistics", 3],
Â  Â  Â  Â  Â  ["Digital Systems", 3],
Â  Â  Â  Â  Â  ["Digital Electronics", 3],
Â  Â  Â  Â  Â  ["Signals & Systems", 3],
Â  Â  Â  Â  Â  ["Analog Circuits", 3],
Â  Â  Â  Â  Â  ["Skill Enhancement Course", 2],
Â  Â  Â  Â  Â  ["Design Thinking and Innovation", 2],
Â  Â  Â  Â  Â  ["Digital Systems Lab", 1],
Â  Â  Â  Â  Â  ["Digital Electronics Lab", 1.5],
Â  Â  Â  Â  ],
Â  Â  Â  Â  eee: [
Â  Â  Â  Â  Â  ["Probability & Statistics", 3],
Â  Â  Â  Â  Â  ["Digital Systems", 3],
Â  Â  Â  Â  Â  ["Electrical Circuit Analysis", 3],
Â  Â  Â  Â  Â  ["Electronic Devices & Circuits", 3],
Â  Â  Â  Â  Â  ["DC Machines", 3],
Â  Â  Â  Â  Â  ["Skill Enhancement Course", 2],
Â  Â  Â  Â  Â  ["Design Thinking and Innovation", 2],
Â  Â  Â  Â  Â  ["Digital Systems Lab", 1],
Â  Â  Â  Â  Â  ["DC Machines Lab", 1],
Â  Â  Â  Â  ],
Â  Â  Â  Â  civ: [
Â  Â  Â  Â  Â  ["Probability & Statistics", 3],
Â  Â  Â  Â  Â  ["Engineering Geology & GIS", 2],
Â  Â  Â  Â  Â  ["Water Supply Engineering", 3],
Â  Â  Â  Â  Â  ["Fluid Mechanics", 3],
Â  Â  Â  Â  Â  ["Solid Mechanics-I", 3],
Â  Â  Â  Â  Â  ["Building Materials & Building Construction", 2],
Â  Â  Â  Â  Â  ["Skill Enhancement Course", 2],
Â  Â  Â  Â  Â  ["Design Thinking and Innovation", 2],
Â  Â  Â  Â  Â  ["Engineering Geology & GIS Lab", 1],
Â  Â  Â  Â  Â  ["Material Testing Lab", 1],
Â  Â  Â  Â  ],
Â  Â  Â  Â  che: [
Â  Â  Â  Â  Â  ["Probability & Statistics", 3],
Â  Â  Â  Â  Â  ["Organic Chemistry", 3],
Â  Â  Â  Â  Â  ["Chemical Engineering Thermodynamics", 3],
Â  Â  Â  Â  Â  ["Chemical Process Calculations", 3],
Â  Â  Â  Â  Â  ["Mechanical Operations", 3],
Â  Â  Â  Â  Â  ["Skill Enhancement Course", 2],
Â  Â  Â  Â  Â  ["Design Thinking and Innovation", 2],
Â  Â  Â  Â  Â  ["Organic Chemistry Lab", 1],
Â  Â  Â  Â  Â  ["Mechanical Operations Lab", 1],
Â  Â  Â  Â  ],
Â  Â  Â  Â  mec: [
Â  Â  Â  Â  Â  ["Material Science and Metallurgy", 3],
Â  Â  Â  Â  Â  ["Strength of Materials", 3],
Â  Â  Â  Â  Â  [" Manufacturing processes", 3],
Â  Â  Â  Â  Â  ["Basic Thermodynamics", 3],
Â  Â  Â  Â  Â  ["Kinematics of Machines", 3],
Â  Â  Â  Â  Â  ["Skill Enhancement Course", 2],
Â  Â  Â  Â  Â  ["Design Thinking and Innovation", 2],
Â  Â  Â  Â  Â  ["Machine Drawing Lab", 1.5],
Â  Â  Â  Â  Â  ["Modeling Lab", 1],
Â  Â  Â  Â  ],
Â  Â  Â  };

Â  Â  Â  function showSGPA(event) {
Â  Â  Â  Â  document
Â  Â  Â  Â  Â  .querySelectorAll(".choice-btn")
Â  Â  Â  Â  Â  .forEach((btn) => btn.classList.remove("active"));
Â  Â  Â  Â  event.target.classList.add("active");
Â  Â  Â  Â  document.getElementById("sgpa-section").classList.remove("hidden");
Â  Â  Â  Â  document.getElementById("cgpa-section").classList.add("hidden");
Â  Â  Â  Â  // Reset forms
Â  Â  Â  Â  document.getElementById("basic-info-form").classList.remove("hidden");
Â  Â  Â  Â  document.getElementById("grade-form").classList.add("hidden");
Â  Â  Â  Â  document.getElementById("basic-info-form").reset();
Â  Â  Â  }

Â  Â  Â  function showCGPA(event) {
Â  Â  Â  Â  document
Â  Â  Â  Â  Â  .querySelectorAll(".choice-btn")
Â  Â  Â  Â  Â  .forEach((btn) => btn.classList.remove("active"));
Â  Â  Â  Â  event.target.classList.add("active");
Â  Â  Â  Â  document.getElementById("sgpa-section").classList.add("hidden");
Â  Â  Â  Â  document.getElementById("cgpa-section").classList.remove("hidden");
Â  Â  Â  Â  document.getElementById("cgpa-form").reset();
Â  Â  Â  Â  document.getElementById("cgpa-result").classList.add("hidden");
Â  Â  Â  }

Â  Â  Â  document
Â  Â  Â  Â  .getElementById("basic-info-form")
Â  Â  Â  Â  .addEventListener("submit", function (e) {
Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  const name = document.getElementById("name").value;
Â  Â  Â  Â  Â  const regno = document.getElementById("regno").value;
Â  Â  Â  Â  Â  const branch = document.getElementById("branch").value;

Â  Â  Â  Â  Â  if (!name || !regno || !branch) {
Â  Â  Â  Â  Â  Â  alert("Please fill all required fields");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  document.getElementById("name-hidden").value = name;
Â  Â  Â  Â  Â  document.getElementById("regno-hidden").value = regno;
Â  Â  Â  Â  Â  document.getElementById("branch-hidden").value = branch;

Â  Â  Â  Â  Â  const container = document.getElementById("subjects-container");
Â  Â  Â  Â  Â  container.innerHTML = "";

Â  Â  Â  Â  Â  // Check if branch exists in subjects
Â  Â  Â  Â  Â  if (!subjects[branch]) {
Â  Â  Â  Â  Â  Â  alert(
Â  Â  Â  Â  Â  Â  Â  "Subjects not defined for selected branch. Please contact administrator."
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  // Create subject inputs
Â  Â  Â  Â  Â  subjects[branch].forEach(([subjectName, credit], index) => {
Â  Â  Â  Â  Â  Â  const subjectDiv = document.createElement("div");
Â  Â  Â  Â  Â  Â  subjectDiv.className = "subject-row";
Â  Â  Â  Â  Â  Â  subjectDiv.innerHTML = `
Â  Â  Â  Â  Â  <div class="subject-name">${subjectName}</div>
Â  Â  Â  Â  Â  <div class="credit-info">Credits: ${credit}</div>
Â  Â  Â  Â  Â  <select class="subject-select grade-select" data-credit="${credit}" data-subject="${subjectName}" required>
Â  Â  Â  Â  Â  Â  <option value="">-- Select Grade --</option>
Â  Â  Â  Â  Â  Â  <option value="A+">A+ (10 points)</option>
Â  Â  Â  Â  Â  Â  <option value="A">A (9 points)</option>
Â  Â  Â  Â  Â  Â  <option value="B">B (8 points)</option>
Â  Â  Â  Â  Â  Â  <option value="C">C (7 points)</option>
Â  Â  Â  Â  Â  Â  <option value="D">D (6 points)</option>
Â  Â  Â  Â  Â  Â  <option value="E">E (5 points)</option>
Â  Â  Â  Â  Â  Â  <option value="F">F (0 points)</option>
Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  container.appendChild(subjectDiv);
Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  document.getElementById("basic-info-form").classList.add("hidden");
Â  Â  Â  Â  Â  document.getElementById("grade-form").classList.remove("hidden");
Â  Â  Â  Â  });

Â  Â  Â  document
Â  Â  Â  Â  .getElementById("grade-form")
Â  Â  Â  Â  .addEventListener("submit", function (e) {
Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  const selects = document.querySelectorAll(".grade-select");
Â  Â  Â  Â  Â  let totalCredits = 0,
Â  Â  Â  Â  Â  Â  totalPoints = 0;
Â  Â  Â  Â  Â  let allFilled = true;

Â  Â  Â  Â  Â  // Clear any existing hidden inputs
Â  Â  Â  Â  Â  const existingInputs = document.querySelectorAll(
Â  Â  Â  Â  Â  Â  'input[name="subjects[]"], input[name="grades[]"], input[name="credits[]"]'
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  existingInputs.forEach((input) => input.remove());

Â  Â  Â  Â  Â  for (let sel of selects) {
Â  Â  Â  Â  Â  Â  const grade = sel.value;
Â  Â  Â  Â  Â  Â  const credit = parseFloat(sel.dataset.credit);
Â  Â  Â  Â  Â  Â  const subjectName = sel.dataset.subject;

Â  Â  Â  Â  Â  Â  if (!grade) {
Â  Â  Â  Â  Â  Â  Â  allFilled = false;
Â  Â  Â  Â  Â  Â  Â  sel.style.borderColor = "#f44336";
Â  Â  Â  Â  Â  Â  Â  continue;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  sel.style.borderColor = "#bbb";
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Create hidden inputs for subject data
Â  Â  Â  Â  Â  Â  const subjectInput = document.createElement("input");
Â  Â  Â  Â  Â  Â  subjectInput.type = "hidden";
Â  Â  Â  Â  Â  Â  subjectInput.name = "subjects[]";
Â  Â  Â  Â  Â  Â  subjectInput.value = subjectName;
Â  Â  Â  Â  Â  Â  this.appendChild(subjectInput);

Â  Â  Â  Â  Â  Â  const gradeInput = document.createElement("input");
Â  Â  Â  Â  Â  Â  gradeInput.type = "hidden";
Â  Â  Â  Â  Â  Â  gradeInput.name = "grades[]";
Â  Â  Â  Â  Â  Â  gradeInput.value = grade;
Â  Â  Â  Â  Â  Â  this.appendChild(gradeInput);

Â  Â  Â  Â  Â  Â  const creditInput = document.createElement("input");
Â  Â  Â  Â  Â  Â  creditInput.type = "hidden";
Â  Â  Â  Â  Â  Â  creditInput.name = "credits[]";
Â  Â  Â  Â  Â  Â  creditInput.value = credit;
Â  Â  Â  Â  Â  Â  this.appendChild(creditInput);

Â  Â  Â  Â  Â  Â  totalPoints += gradeToPoint[grade] * credit;
Â  Â  Â  Â  Â  Â  totalCredits += credit;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  if (!allFilled) {
Â  Â  Â  Â  Â  Â  alert("Please select grades for all subjects");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  if (totalCredits === 0) {
Â  Â  Â  Â  Â  Â  alert("Error: Total credits cannot be zero");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  const sgpa = (totalPoints / totalCredits).toFixed(2);
Â  Â  Â  Â  Â  document.getElementById("sgpa-hidden").value = sgpa;

Â  Â  Â  Â  Â  // ğŸ”¥ SHOW LOADING OVERLAY BEFORE SUBMITTING TO DJANGO
          loadingOverlay.style.display = 'flex';
Â  Â  Â  Â  Â  this.submit();
Â  Â  Â  Â  });

Â  Â  Â  // Function to calculate CGPA from 3 semesters
Â  Â  Â  function calculateCGPA() {
Â  Â  Â  Â  const sem1Gpa =
Â  Â  Â  Â  Â  parseFloat(document.getElementById("sem1-gpa").value) || 0;
Â  Â  Â  Â  const sem2Gpa =
Â  Â  Â  Â  Â  parseFloat(document.getElementById("sem2-gpa").value) || 0;
Â  Â  Â  Â  const sem3Gpa =
Â  Â  Â  Â  Â  parseFloat(document.getElementById("sem3-gpa").value) || 0;

Â  Â  Â  Â  // Validate inputs
Â  Â  Â  Â  const allValid = [sem1Gpa, sem2Gpa, sem3Gpa].every(
Â  Â  Â  Â  Â  (gpa) => !isNaN(gpa) && gpa >= 0 && gpa <= 10
Â  Â  Â  Â  );

Â  Â  Â  Â  if (!allValid) {
Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  }

Â  Â  Â  Â  // Calculate average of 3 semesters
Â  Â  Â  Â  const cgpa = ((sem1Gpa + sem2Gpa + sem3Gpa) / 3).toFixed(2);
Â  Â  Â  Â  return cgpa;
Â  Â  Â  }

Â  Â  Â  // Update CGPA display in real-time
Â  Â  Â  function updateCGPADisplay() {
Â  Â  Â  Â  const cgpa = calculateCGPA();
Â  Â  Â  Â  if (cgpa !== null) {
Â  Â  Â  Â  Â  document.getElementById("cgpa-value").textContent = cgpa;
Â  Â  Â  Â  Â  document.getElementById("cgpa-result").classList.remove("hidden");
Â  Â  Â  Â  Â  document.getElementById("cgpa-hidden").value = cgpa;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  document.getElementById("cgpa-result").classList.add("hidden");
Â  Â  Â  Â  }
Â  Â  Â  }

Â  Â  Â  // Add event listeners to GPA inputs for real-time calculation
Â  Â  Â  document
Â  Â  Â  Â  .getElementById("sem1-gpa")
Â  Â  Â  Â  .addEventListener("input", updateCGPADisplay);
Â  Â  Â  document
Â  Â  Â  Â  .getElementById("sem2-gpa")
Â  Â  Â  Â  .addEventListener("input", updateCGPADisplay);
Â  Â  Â  document
Â  Â  Â  Â  .getElementById("sem3-gpa")
Â  Â  Â  Â  .addEventListener("input", updateCGPADisplay);

Â  Â  Â  document
Â  Â  Â  Â  .getElementById("cgpa-form")
Â  Â  Â  Â  .addEventListener("submit", function (e) {
Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  const sem1Gpa = parseFloat(document.getElementById("sem1-gpa").value);
Â  Â  Â  Â  Â  const sem2Gpa = parseFloat(document.getElementById("sem2-gpa").value);
Â  Â  Â  Â  Â  const sem3Gpa = parseFloat(document.getElementById("sem3-gpa").value);

Â  Â  Â  Â  Â  if (isNaN(sem1Gpa) || isNaN(sem2Gpa) || isNaN(sem3Gpa)) {
Â  Â  Â  Â  Â  Â  alert("Please enter valid GPA values for all semesters");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  if (
Â  Â  Â  Â  Â  Â  sem1Gpa < 0 ||
Â  Â  Â  Â  Â  Â  sem1Gpa > 10 ||
Â  Â  Â  Â  Â  Â  sem2Gpa < 0 ||
Â  Â  Â  Â  Â  Â  sem2Gpa > 10 ||
Â  Â  Â  Â  Â  Â  sem3Gpa < 0 ||
Â  Â  Â  Â  Â  Â  sem3Gpa > 10
Â  Â  Â  Â  Â  ) {
Â  Â  Â  Â  Â  Â  alert("GPA values must be between 0 and 10");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  const cgpa = calculateCGPA();
Â  Â  Â  Â  Â  if (cgpa === null) {
Â  Â  Â  Â  Â  Â  alert("Please enter valid GPA values");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  document.getElementById("cgpa-hidden").value = cgpa;

Â  Â  Â  Â  Â  // ğŸ”¥ SHOW LOADING OVERLAY BEFORE SUBMITTING TO DJANGO
          loadingOverlay.style.display = 'flex';
Â  Â  Â  Â  Â  this.submit();
Â  Â  Â  Â  });

Â  Â  Â  // Initialize with SGPA form
Â  Â  Â  document.addEventListener("DOMContentLoaded", function () {
Â  Â  Â  Â  // Ensure showSGPA and showCGPA can be called without an event argument on load
        const defaultSGPABtn = document.querySelector('.choice-btn.active');
        if (defaultSGPABtn) {
            defaultSGPABtn.click(); 
        } else {
            // Fallback if active class is missing
            document.getElementById("sgpa-section").classList.remove("hidden");
Â  Â  Â  Â  Â  Â  document.getElementById("cgpa-section").classList.add("hidden");
        }
Â  Â  Â  });
Â  Â  </script>
Â  </body>
Â  
</html>
